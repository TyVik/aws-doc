---
title: "Контроль расходов"
weight: 4
type: "page"
creatordisplayname: "TyVik"
creatoremail: "tyvik8@gmail.com"
lastmodifierdisplayname: "TyVik"
lastmodifieremail: "tyvik8@gmail.com"
---

Одна из важных задач при работе с AWS: планирование бюджета и контроль расходов. Как я уже говорил ранее, здесь можно легко заказать ресурсов на несколько тысяч долларов и забыть про это. Ничего, Amazon напомнит ;) В этой статье я покажу как избежать подобных ситуаций.

## My Billing Dashboard

![My billing dashboard](/begin/billing/images/menu.png?width=250px&classes=inline-image)Всё начинается с пункта меню My Billing Dashboard под вашим именем в меню справа. Именно здесь можно установить бюджет, посмотреть счета, оптимизировать расходы. Но обо всём по-порядку. У меня свежий аккаунт, и я стараюсь не вылезать за уровень бесплатного обслуживания. Как видите, удаётся это не всегда :) На текущий момент мой дашборд выглядит следующим образом:

Справа - круговая диаграмма стоимости ресурсов за текущий месяц, можно сразу оценить что же скушало столько денег. Слева - столбцы расходов. Первый - за предыдущий месяц, второй - за текущий по сегодняшнее число, третий - прогнозируемый счёт за текущий месяц. Над ними находится список ресурсов, которые бесплатно предоставляются по Free Tier. Через год он пропадёт, и суммы выйдут гораздо больше, но к этому можно подготовиться. Разберём некоторые пункты в боковом меню.

## Bills

![Bill](/begin/billing/images/bill.png)Здесь можно посмотреть счета за каждый месяц, включая текущий, ещё не оплаченный. Так как AWS учитывает все потребляемые вами ресурсы, то и биллинг у него довольно подробный. Например, в разделе RDS будут отдельными строками плата за хранилище и за запущенные инстансы; для S3 - отдельно за объём, кол-во GET запросов и кол-во PUT, POST, LIST. Тут я выложил отчёт за мой первый месяц использования AWS. Обратите внимание на раздел Elastic Compute Cloud, думаете там основная сумма за использование виртуальных машин? Как бы не так - за единственный снапшот! Почему-то использование снапшотов не входит в Free Tier, хотя они очень нужны. Как я упоминал ранее, виртуалки иногда полностью выходят из строя.

## Cost Explorer

![Cost explorer](/begin/billing/images/cost_explorer.png)Самая подробная страница по анализу потребления ресурсов. Можно рассмотреть динамику использования конкретного сервиса для каждого региона. Очень полезен отчёт RI Utilization, в котором показано использование зарезервированных инстансов.

## Budgets & Preferences

Я не зря объединил эти пункты, т.к. то, что вы создали бюджет, совсем не означает, что будет какое-то предупреждение о его превышении :) Это нужно явно включить в Preferences -> Receive Billing Alerts. Но вернёмся к бюджету. Мой сейчас выглядит вот так:
![Budget](/begin/billing/images/budget.png)
Да, я очень жадный и планирую платить за использование ресурсов не больше $1/mo. Можно составить отдельные бюджеты на каждый проект или сервис AWS, но только первые 3 из них бесплатны. Более того, здесь же можно настроить email, push или SMS оповещения.

## Payment Methods & Payment History

В первом настраиваются средства платежа (привязываются карточки), во втором - история платежей. Что-либо больше сказать трудно :)
